<mvc:View height="100%" controllerName="intern2020.controller.Manager"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns="sap.m">

	<Page title="{i18n>managerPage}" enableScrolling="true" class="sapUiContentPadding" showNavButton="true" 
	 navButtonPress="goToLoginAndLogOut" visible="{UserInfo>/isManager}">
        <headerContent>
			<MenuButton text="{i18n>MyProfile}" icon="sap-icon://customer">
				<menu>
					<Menu itemSelected="onMenuAction">
						<items>
							<MenuItem text="{i18n>AccInfo}" icon="sap-icon://account" press="onGoToProfile"/>
							<MenuItem text="{i18n>ChangePasswd}" icon="sap-icon://action-settings" press="onGoToSettings" />
							<MenuItem text="{i18n>Own}" icon="sap-icon://suitcase" press="onGoToYourTrips"/>
						</items>
					</Menu>
				</menu>
			</MenuButton>
		</headerContent>		





		<content>


			<Table selectionChange="handleSelectionChange" id="idTrips" items="{/Front_TripSet}">
				<headerToolbar >
					<OverflowToolbar id="otbSubheader">
							<ToggleButton id="approvedButton" icon="sap-icon://accept" text="{i18n>Approved}" pressed="false" press="onFilterByStatus" class="sapUiTinyMarginBegin sapUiTinyMarginEnd decreaseFont accept" type="Accept">
							<layoutData>
								<OverflowToolbarLayoutData minWidth="8em" maxWidth="10em" shrinkable="true"/>
							</layoutData>
						</ToggleButton>
						<ToggleButton id="toBeApprovedButton" icon="sap-icon://time-account" type="Ghost" pressed="false" text="{i18n>TBA}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd decreaseFont" press="onFilterByStatus">
							<layoutData>
								<OverflowToolbarLayoutData minWidth="8em" maxWidth="10em" shrinkable="true"/>
							</layoutData>
						</ToggleButton>
						<ToggleButton id="declinedButton" icon="sap-icon://decline" pressed="false" text="{i18n>Declined}" press="onFilterByStatus" class="sapUiTinyMarginBegin sapUiTinyMarginEnd decreaseFont decline" type="Reject">
							<layoutData>
								<OverflowToolbarLayoutData minWidth="8em" maxWidth="10em" shrinkable="true"/>
							</layoutData>
						</ToggleButton>
						
						<ToolbarSpacer/>
						<SearchField id="searchField" width="20%" search="onFilterBySearch">
							<layoutData>
								<OverflowToolbarLayoutData minWidth="200px" maxWidth="400px" shrinkable="true"/>
							</layoutData>
						</SearchField>
						<Button text="{i18n>Reset}" type="Emphasized" press="onReset" tooltip="{i18n>Clear}"/>
					</OverflowToolbar>
				</headerToolbar>
				<columns>
					<Column minScreenWidth="Small" >
						<Button iconFirst="false" id="serviceUnitButton" text="{i18n>Serviceunit}" icon="sap-icon://sort" type="Transparent" press=".onSortByServiceUnit"/>
					</Column>
					<Column minScreenWidth="Phone" demandPopin="true">
						<Button iconFirst="false" id="dateButton" text="{i18n>Date}" icon="sap-icon://sort" type="Transparent" press=".onSortByDate"/>
					</Column>
					<Column minScreenWidth="Phone" demandPopin="true" hAlign="End">
						<Button iconFirst="false" id="usernameButton" text="{i18n>Username}" icon="sap-icon://sort" type="Transparent" press=".onSortByUsername"/>
					</Column>
					<Column minScreenWidth="Phone" demandPopin="true" hAlign="End">
						<Button iconFirst="false" id="countryButton" text="{i18n>Country}" icon="sap-icon://sort" type="Transparent" press=".onSortByCountry"/>
					</Column>
					<Column minScreenWidth="Phone" demandPopin="true" hAlign="End">
						<Button iconFirst="false" id="priceButton" text="{i18n>Total}" icon="sap-icon://sort" type="Transparent" press=".onSortByTotalPrice"/>
					</Column>
					<Column hAlign="End">
						<Button iconFirst="false" id="statusButton" text="{i18n>Status}" icon="sap-icon://sort" type="Transparent" press=".onSortByStatus"/>
					</Column>
					<Column hAlign="Center">
						<Button iconFirst="false" id="price" text="Price" icon="sap-icon://sort" type="Transparent" press=".onSortByStatus"/>
					</Column>
					<Column hAlign="Center">
						<Button iconFirst="false" id="status" text="Status" icon="sap-icon://sort" type="Transparent" press=".onSortByStatus"/>
					</Column>
				</columns>
				<items>
					<ColumnListItem type="Navigation" press=".onPressDetail">
						<cells>
							<ObjectIdentifier text="{ServiceUnit}" />
							<Text text="{
											path: 'StartDate',
											type: 'sap.ui.model.type.Date',
											formatOptions: {
												style: 'short'
											}
										} - {path: 'EndDate',
											type: 'sap.ui.model.type.Date',
											formatOptions: {
												style: 'short'
												}}" />
							<Text text="{UId}" />
							<Text text="{Country}" />
							<Text text="{Total} EUR" />
							<ObjectNumber number="{= ${Status} === 1 ? 'Approved' : ${Status} === 0 ? 'To Be Approved' : 'Declined'}"
							     	      state="{= ${Status} === 1 ? 'Success' : ${Status} === 0 ? 'Warning' : 'Error'}" />
						<!--	<Text text="{Country}" visbile="{= ${UserInfo>/isUser} === 'user' ? false :true}" />-->	
						</cells>
					</ColumnListItem>
				</items>
			</Table>
		</content>

	</Page>
</mvc:View>
